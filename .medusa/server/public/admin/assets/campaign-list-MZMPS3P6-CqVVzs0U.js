import{u as f}from"./chunk-IVZ6BMDB-DDbgoT-l.js";import{a as x,j as t,b as p,e6 as b,C as h,H as j,L as C,B as y,r as v,k as T,g as P,eh as S,A as _,P as w,T as k,i as A,t as u}from"./index-bzW-SAbR.js";import{u as E,_ as D}from"./chunk-EYL2JACT-DaEhkYkq.js";import{u as q}from"./chunk-C76H5USB-B5ZwzENj.js";import"./chunk-Z26G6WFJ-Dg_BGIoe.js";import{S as L}from"./chunk-GIZFNLKK-CPK5btPe.js";import"./chunk-MSDRGCRR-BBgzdxtg.js";import"./chunk-P3UUX2T6-xl53acf-.js";import"./chunk-SJ3E4T6B-CO48ntQZ.js";import"./chunk-PFKKVLZX-C1qvuqbN.js";import"./chunk-YEDAFXMB-VFQQ8lvz.js";import"./chunk-M3VFKDXJ-yKiYGkTu.js";import"./chunk-HQKGZADC-B1LMspy6.js";import"./chunk-EMIHDNB7-DvQ9_JwC.js";import"./_isIndex-w8hwaGbI.js";import"./index-BJDZ1-XD.js";import"./Trans-BTwOMxuD.js";var N=({prefix:e,pageSize:a=20})=>{const s=q(["offset","q","order","created_at","updated_at"],e),{offset:r,q:n,order:o,created_at:i,updated_at:c}=s;return{searchParams:{limit:a,offset:r?Number(r):0,order:o,created_at:i?JSON.parse(i):void 0,updated_at:c?JSON.parse(c):void 0,q:n},raw:s}},d=20,O=()=>{const{t:e}=p(),{raw:a,searchParams:s}=N({pageSize:d}),{campaigns:r,count:n,isPending:o,isError:i,error:c}=b(s,{placeholderData:T}),m=B(),{table:g}=E({data:r??[],columns:m,count:n,enablePagination:!0,getRowId:l=>l.id,pageSize:d});if(i)throw c;return t.jsxs(h,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx(j,{level:"h2",children:e("campaigns.domain")}),t.jsx(C,{to:"/campaigns/create",children:t.jsx(y,{size:"small",variant:"secondary",children:e("actions.create")})})]}),t.jsx(D,{table:g,columns:m,count:n,pageSize:d,pagination:!0,search:!0,navigateTo:l=>l.id,isLoading:o,queryObject:a,orderBy:[{key:"name",label:e("fields.name")},{key:"created_at",label:e("fields.createdAt")},{key:"updated_at",label:e("fields.updatedAt")}]})]})},z=({campaign:e})=>{const{t:a}=p(),s=P(),{mutateAsync:r}=S(e.id),n=async()=>{await s({title:a("general.areYouSure"),description:a("campaigns.deleteCampaignWarning",{name:e.name}),verificationInstruction:a("general.typeToConfirm"),verificationText:e.name,confirmText:a("actions.delete"),cancelText:a("actions.cancel")})&&await r(void 0,{onSuccess:()=>{u.success(a("campaigns.delete.successToast",{name:e.name}))},onError:i=>{u.error(i.message)}})};return t.jsx(_,{groups:[{actions:[{icon:t.jsx(w,{}),label:a("actions.edit"),to:`/campaigns/${e.id}/edit`}]},{actions:[{icon:t.jsx(k,{}),label:a("actions.delete"),onClick:n}]}]})},H=A(),B=()=>{const e=f();return v.useMemo(()=>[...e,H.display({id:"actions",cell:({row:a})=>t.jsx(z,{campaign:a.original})})],[e])},te=()=>{const{getWidgets:e}=x();return t.jsx(L,{widgets:{after:e("campaign.list.after"),before:e("campaign.list.before")},hasOutlet:!0,children:t.jsx(O,{})})};export{te as Component};
