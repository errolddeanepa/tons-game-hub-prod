import{L as S}from"./chunk-I3VB6NM2-DL1Z_qgi.js";import{P as u}from"./chunk-P3UUX2T6-xl53acf-.js";import{S as h,a as v}from"./chunk-HWKLNKOY-4n4inUUu.js";import{b as f,dS as _,a as T,j as s,C as j,H as P,fn as C,u as w,g as E,r as N,ae as g,P as q,T as D,k as K,a6 as R,s as H,q as x,dQ as b,t as k}from"./index-bzW-SAbR.js";import{a as I}from"./chunk-B6ZOPCPA-2RhdG1il.js";import{T as m}from"./chunk-GIZFNLKK-CPK5btPe.js";import{D as M}from"./chunk-7GBCLBMX-DxRNPbHS.js";import{u as O}from"./chunk-C76H5USB-B5ZwzENj.js";import"./chunk-EQTBJSBZ-DecX6v98.js";import"./Trans-BTwOMxuD.js";var Q="name,*sales_channels,*address,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",c=R(),z=()=>{const{t:e}=f(),l=w(),d=E(),r=async i=>{if(await d({title:e("general.areYouSure"),description:e("stockLocations.delete.confirmation",{name:i.name}),confirmText:e("actions.remove"),cancelText:e("actions.cancel")}))try{await H.admin.stockLocation.delete(i.id),x.invalidateQueries({queryKey:b.lists()}),x.invalidateQueries({queryKey:b.detail(i.id)}),k.success(e("stockLocations.delete.successToast",{name:i.name}))}catch(a){k.error(a.message)}};return N.useMemo(()=>[c.accessor("name",{header:e("fields.name"),cell:({getValue:i})=>{const t=i();return t?s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:t}):s.jsx(u,{})}}),c.accessor("address",{header:e("fields.address"),cell:({getValue:i,row:t})=>{const a=i(),o=t.original;return a?s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-ui-fg-subtle text-small truncate",children:I({address:o.address}).join(", ")})}):s.jsx(u,{})}}),c.accessor("fulfillment_sets",{id:"shipping_fulfillment",header:e("stockLocations.fulfillmentSets.shipping.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="shipping"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("fulfillment_sets",{id:"pickup_fulfillment",header:e("stockLocations.fulfillmentSets.pickup.header"),cell:({getValue:i})=>{const t=i(),o=!!(t==null?void 0:t.find(n=>n.type==="pickup"));return s.jsx(g,{color:o?"green":"grey",children:e(o?"statuses.enabled":"statuses.disabled")})}}),c.accessor("sales_channels",{header:e("stockLocations.salesChannels.label"),cell:({getValue:i})=>{const t=i();return t!=null&&t.length?s.jsx("div",{className:"flex items-center",children:s.jsx(S,{inline:!0,n:1,list:t.map(a=>a.name)})}):s.jsx(u,{})}}),c.action({actions:i=>{const t=i.row.original;return[[{icon:s.jsx(q,{}),label:e("actions.edit"),onClick:()=>{l(`/settings/locations/${t.id}/edit`)}}],[{icon:s.jsx(D,{}),label:e("actions.delete"),onClick:()=>r(t)}]]}})],[])},F=({pageSize:e=20,prefix:l})=>{const d=O(["order","offset","q"],l),{offset:r,...i}=d;return{limit:e,offset:r?Number(r):0,...i}},L=20,y="loc";function ee(){const{t:e}=f(),l=F({pageSize:L,prefix:y}),{stock_locations:d=[],count:r,isError:i,error:t,isLoading:a}=_({fields:Q,...l},{placeholderData:K}),o=z(),{getWidgets:n}=T();if(i)throw t;return s.jsxs(m,{widgets:{after:n("location.list.after"),before:n("location.list.before"),sideAfter:n("location.list.side.after"),sideBefore:n("location.list.side.before")},showJSON:!0,children:[s.jsx(m.Main,{children:s.jsx(j,{className:"flex flex-col divide-y p-0",children:s.jsx(M,{data:d,columns:o,rowCount:r,pageSize:L,getRowId:p=>p.id,heading:e("stockLocations.domain"),subHeading:e("stockLocations.list.description"),emptyState:{empty:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageEmpty")},filtered:{heading:e("stockLocations.list.noRecordsMessage"),description:e("stockLocations.list.noRecordsMessageFiltered")}},actions:[{label:e("actions.create"),to:"create"}],isLoading:a,rowHref:p=>`/settings/locations/${p.id}`,enableSearch:!0,prefix:y,layout:"fill"})})}),s.jsx(m.Sidebar,{children:s.jsx(A,{})})]})}var A=()=>{const{t:e}=f();return s.jsxs(j,{className:"p-0",children:[s.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:s.jsx(P,{level:"h2",children:e("stockLocations.sidebar.header")})}),s.jsx(h,{to:"/settings/locations/shipping-profiles",labelKey:e("stockLocations.sidebar.shippingProfiles.label"),descriptionKey:e("stockLocations.sidebar.shippingProfiles.description"),icon:s.jsx(v,{})}),s.jsx(h,{to:"/settings/locations/shipping-option-types",labelKey:e("stockLocations.sidebar.shippingOptionTypes.label"),descriptionKey:e("stockLocations.sidebar.shippingOptionTypes.description"),icon:s.jsx(C,{})})]})};export{ee as Component};
