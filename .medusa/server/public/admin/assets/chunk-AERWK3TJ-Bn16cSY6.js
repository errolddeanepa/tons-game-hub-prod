import{r as d,ct as l,dA as u,j as o,I as S,u as y,c as J,b as Q,dB as U,X as V,dC as h}from"./index-8g9qLHfJ.js";var x=e=>{const a=J();return d.useMemo(()=>{var r;const t=(r=a.state)==null?void 0:r.restore_params;return t?`${e}?${t.toString()}`:a.search?`${e}${a.search}`:e},[a.state,a.search,e])},F=({form:e,blockSearchParams:a=!1,children:n,onClose:t})=>{const{t:r}=Q(),{formState:{isDirty:p}}=e,s=U(({currentLocation:c,nextLocation:g})=>{const{isSubmitSuccessful:f}=g.state||{};if(f)return t==null||t(!0),!1;const m=c.pathname!==g.pathname,q=c.search!==g.search;if(a){const G=p&&(m||q);return m&&(t==null||t(f)),G}const z=p&&m;return m&&(t==null||t(f)),z}),v=()=>{var c;(c=s==null?void 0:s.reset)==null||c.call(s)},i=()=>{var c;(c=s==null?void 0:s.proceed)==null||c.call(s),t==null||t(!1)};return o.jsxs(V,{...e,children:[n,o.jsx(h,{open:s.state==="blocked",variant:"confirmation",children:o.jsxs(h.Content,{children:[o.jsxs(h.Header,{children:[o.jsx(h.Title,{children:r("general.unsavedChangesTitle")}),o.jsx(h.Description,{children:r("general.unsavedChangesDescription")})]}),o.jsxs(h.Footer,{children:[o.jsx(h.Cancel,{onClick:v,type:"button",children:r("actions.cancel")}),o.jsx(h.Action,{onClick:i,type:"button",children:r("actions.continue")})]})]})})]})},j=d.createContext(null),D=({prev:e,children:a})=>{const n=y(),[t,r]=d.useState(!0),p=d.useCallback(v=>{n(v||e,{replace:!0,state:{isSubmitSuccessful:!0}})},[n,e]),s=d.useMemo(()=>({handleSuccess:p,setCloseOnEscape:r,__internal:{closeOnEscape:t}}),[p,r,t]);return o.jsx(j.Provider,{value:s,children:a})},M=d.createContext(null),C=({children:e,onOpenChange:a})=>{const[n,t]=d.useState({}),r=i=>n[i]||!1,p=(i,c)=>{t(g=>({...g,[i]:c})),a(c)},s=i=>{t(c=>({...c,[i]:!1}))},v=i=>{t(c=>{const g={...c};return delete g[i],g})};return o.jsx(M.Provider,{value:{getIsOpen:r,setIsOpen:p,register:s,unregister:v},children:e})},k=()=>{const e=d.useContext(M);if(!e)throw new Error("useStackedModal must be used within a StackedModalProvider");return e},W=({prev:e="..",children:a})=>{const n=y(),[t,r]=d.useState(!1),[p,s]=d.useState(!1),v=x(e);d.useEffect(()=>(r(!0),()=>{r(!1),s(!1)}),[]);const i=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}r(c)};return o.jsx(l,{open:t,onOpenChange:i,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:s,children:o.jsx(l.Content,{"aria-describedby":void 0,className:S({"!bg-ui-bg-disabled !inset-y-5 !right-5":p}),children:a})})})})},Y=l.Header,Z=l.Title,L=l.Description,ee=l.Body,te=l.Footer,ae=l.Close,re=F,Se=Object.assign(W,{Header:Y,Title:Z,Body:ee,Description:L,Footer:te,Close:ae,Form:re}),se=()=>{const e=d.useContext(j);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},oe=({prev:e="..",children:a})=>{const n=y(),[t,r]=d.useState(!1),[p,s]=d.useState(!1),v=x(e);d.useEffect(()=>(r(!0),()=>{r(!1),s(!1)}),[]);const i=c=>{if(!c){document.body.style.pointerEvents="auto",n(v,{replace:!0});return}r(c)};return o.jsx(u,{open:t,onOpenChange:i,children:o.jsx(D,{prev:v,children:o.jsx(C,{onOpenChange:s,children:o.jsx(ne,{stackedModalOpen:p,children:a})})})})},ne=({stackedModalOpen:e,children:a})=>{const{__internal:n}=se(),t=!n.closeOnEscape;return o.jsx(u.Content,{onEscapeKeyDown:t?r=>{r.preventDefault()}:void 0,className:S({"!bg-ui-bg-disabled !inset-x-5 !inset-y-3":e}),children:a})},ce=u.Header,de=u.Title,ie=u.Description,le=u.Footer,ue=u.Body,pe=u.Close,ve=F,fe=Object.assign(oe,{Header:ce,Title:de,Body:ue,Description:ie,Footer:le,Close:pe,Form:ve}),ge=({id:e,children:a})=>{const{register:n,unregister:t,getIsOpen:r,setIsOpen:p}=k();return d.useEffect(()=>(n(e),()=>t(e)),[]),o.jsx(l,{open:r(e),onOpenChange:s=>p(e,s),children:a})},O=l.Close;O.displayName="StackedDrawer.Close";var T=l.Header;T.displayName="StackedDrawer.Header";var N=l.Body;N.displayName="StackedDrawer.Body";var w=l.Trigger;w.displayName="StackedDrawer.Trigger";var B=l.Footer;B.displayName="StackedDrawer.Footer";var b=l.Title;b.displayName="StackedDrawer.Title";var R=l.Description;R.displayName="StackedDrawer.Description";var E=d.forwardRef(({className:e,...a},n)=>o.jsx(l.Content,{ref:n,className:S(e),overlayProps:{className:"bg-transparent"},...a}));E.displayName="StackedDrawer.Content";var ye=Object.assign(ge,{Close:O,Header:T,Body:N,Content:E,Trigger:w,Footer:B,Description:R,Title:b}),he=({id:e,onOpenChangeCallback:a,children:n})=>{const{register:t,unregister:r,getIsOpen:p,setIsOpen:s}=k();d.useEffect(()=>(t(e),()=>r(e)),[]);const v=i=>{s(e,i),a==null||a(i)};return o.jsx(u,{open:p(e),onOpenChange:v,children:n})},H=u.Close;H.displayName="StackedFocusModal.Close";var P=u.Header;P.displayName="StackedFocusModal.Header";var I=u.Body;I.displayName="StackedFocusModal.Body";var _=u.Trigger;_.displayName="StackedFocusModal.Trigger";var $=u.Footer;$.displayName="StackedFocusModal.Footer";var A=u.Title;A.displayName="StackedFocusModal.Title";var K=u.Description;K.displayName="StackedFocusModal.Description";var X=d.forwardRef(({className:e,...a},n)=>o.jsx(u.Content,{ref:n,className:S("!top-6",e),overlayProps:{className:"bg-transparent"},...a}));X.displayName="StackedFocusModal.Content";var xe=Object.assign(he,{Close:H,Header:P,Body:I,Content:X,Trigger:_,Footer:$,Description:K,Title:A});export{fe as R,xe as S,k as a,Se as b,ye as c,se as u};
