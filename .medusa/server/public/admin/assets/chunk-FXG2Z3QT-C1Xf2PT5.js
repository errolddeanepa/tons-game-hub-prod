import{e as w,f as E,g as T,h as q}from"./chunk-NKVMOKZA-aGWgugK2.js";import{j as s,a1 as D,r as f,dp as L,aA as R,dn as V}from"./index-8g9qLHfJ.js";var O=({context:l,disabledToggleTooltip:h,...i})=>{const{field:c,control:u,renderProps:e}=w({context:l}),p=E({context:l}),{container:t,input:r}=e;return s.jsx(D,{control:u,name:c,render:({field:d})=>s.jsx(T,{...t,...p,outerComponent:s.jsx(B,{field:d,inputProps:r,isAnchor:t.isAnchor,tooltip:h}),children:s.jsx(I,{field:d,inputProps:r,...i})})})},B=({field:l,inputProps:h,isAnchor:i,tooltip:c})=>{const u=f.useRef(null),{value:e}=l,{onChange:p}=h,[t,r]=f.useState(e);f.useEffect(()=>{r(e)},[e]);const d=o=>{const n={...t,checked:o};!o&&!n.disabledToggle&&(n.quantity=""),o&&n.quantity===""&&(n.quantity=0),r(n),p(n,e)};return f.useEffect(()=>{const o=n=>{var g;i&&n.key.toLowerCase()==="x"&&(n.preventDefault(),(g=u.current)==null||g.click())};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[i]),s.jsx(L,{showTooltip:t.disabledToggle&&c,content:c,children:s.jsx("div",{className:"absolute inset-y-0 left-4 z-[3] flex w-fit items-center justify-center",children:s.jsx(R,{dir:"ltr",ref:u,size:"small",className:"shrink-0 rtl:rotate-180",checked:t.checked,disabled:t.disabledToggle,onCheckedChange:d})})})},I=({field:l,inputProps:h,placeholder:i,...c})=>{const{ref:u,value:e,onChange:p,onBlur:t,...r}=l,{ref:d,onChange:o,onBlur:n,onFocus:g,...k}=h,[a,C]=f.useState(e);f.useEffect(()=>{C(e)},[e]);const y=q(d,u),v=(x,N,P)=>{const b=x!==void 0?x:"",m={...a,quantity:b};b!==""?m.checked=!0:m.checked&&m.disabledToggle===!1&&(m.checked=!1),C(m)},j=()=>{a.disabledToggle&&a.quantity===""&&(a.quantity=0),o(a,e)};return s.jsx("div",{className:"flex size-full items-center gap-x-2",children:s.jsx(V,{...r,...k,...c,ref:y,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:a==null?void 0:a.quantity,onValueChange:v,formatValueOnBlur:!0,onBlur:()=>{t(),n(),j()},onFocus:g,decimalsLimit:0,autoComplete:"off",tabIndex:-1,placeholder:a.checked?void 0:i})})};export{O as D};
